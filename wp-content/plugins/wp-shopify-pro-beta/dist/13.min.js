(window.wpshopify=window.wpshopify||[]).push([[13],{1380:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),c=a(0),o=a.n(c),s=a(61),u=a(372),i=a(51),l=a.n(i),p=a(69),m=a.n(p),b=a(165),E=a(36),y=a(45),C=a.n(y),f=a(63);function d(){var e=Object(c.useContext)(s.a),t=r()(e,1)[0],a=Object(c.useContext)(u.a),n=r()(a,2),i=n[0],p=n[1];function y(){return t.isMobile?(p({type:"SET_IS_CHECKING_OUT",payload:!1}),"_self"):("_blank"===WP_Shopify.settings.checkoutButtonTarget&&p({type:"SET_IS_CHECKING_OUT",payload:!1}),WP_Shopify.settings.checkoutButtonTarget)}function d(e){var a;window.open((a=e.webUrl,t.info.primaryDomain.url+function(e){return e.split("myshopify.com")[1]}(a)),y())}function w(e){if(!WP_Shopify.settings.enableCustomCheckoutDomain||!e.webUrl.includes("myshopify.com"))return function(e){window.open(e.webUrl,y())}(e);d(e)}function h(){return(h=m()(l.a.mark(function e(){var t,a,n,c,o,s,u,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p({type:"UPDATE_NOTICES",payload:[]}),p({type:"SET_IS_CHECKING_OUT",payload:!0}),wp.hooks&&wp.hooks.doAction("on.checkout",i.checkoutCache),e.next=5,Object(f.a)(Object(E.o)(i.checkoutCache.lineItems));case 5:if(t=e.sent,a=r()(t,2),n=a[0],c=a[1],!n){e.next=12;break}return p({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",p({type:"UPDATE_NOTICES",payload:{type:"error",message:n}}));case 12:if(!C()(c.lineItems)){e.next=15;break}return p({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",p({type:"UPDATE_NOTICES",payload:{type:"error",message:"No line items exist "}}));case 15:if(C()(i.customAttributes)&&C()(i.note)){e.next=26;break}return e.next=18,Object(f.a)(Object(E.r)({customAttributes:i.customAttributes,note:i.note}));case 18:if(o=e.sent,s=r()(o,2),u=s[0],m=s[1],!u){e.next=25;break}return p({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",p({type:"UPDATE_NOTICES",payload:{type:"error",message:u}}));case 25:return e.abrupt("return",w(m));case 26:w(c);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"wps-btn wps-btn-checkout",onClick:function(){return h.apply(this,arguments)},"data-wps-is-ready":i.isReady,disabled:i.isCheckingOut||!i.termsAccepted||i.isCartEmpty,style:{backgroundColor:t.settings.cart.checkoutButtonColor}},i.isCheckingOut?o.a.createElement(b.a,{isLoading:i.isCheckingOut}):i.checkoutText))}var w=a(453);function h(){var e=Object(c.useContext)(s.a),t=r()(e,2),a=t[0],n=t[1],u=Object(c.useState)(""),i=r()(u,2),l=i[0],p=i[1],m=Object(w.useDebounce)(l,250),b=r()(m,1)[0],E=Object(c.useRef)(!0);return Object(c.useEffect)(function(){E.current?E.current=!1:(wp.hooks&&wp.hooks.doAction("on.checkout.note",b),n({type:"SET_CHECKOUT_NOTE",payload:b}))},[b]),o.a.createElement("section",{className:"wps-cart-notes"},o.a.createElement("label",{value:"Checkout notes",htmlFor:"wps-input-notes"},"Notes:"),o.a.createElement("textarea",{placeholder:a.settings.cart.cartNotesPlaceholder,id:"wps-input-notes",className:"wps-input wps-input-textarea",onChange:function(e){p(e.target.value)}}))}function O(){var e=Object(c.useContext)(s.a),t=r()(e,1)[0],a=Object(c.useContext)(u.a),n=r()(a,2),i=(n[0],n[1]),l=Object(c.useState)(!1),p=r()(l,2),m=p[0],b=p[1];return Object(c.useEffect)(function(){i({type:"SET_TERMS_ACCEPTED",payload:!1})},[]),o.a.createElement("section",{className:"wps-cart-terms container"},o.a.createElement("div",{className:"wps-input-row row"},o.a.createElement("input",{onChange:function(e){b(!m),i({type:"SET_TERMS_ACCEPTED",payload:!m})},id:"wps-input-terms",defaultChecked:m,type:"checkbox",className:"wps-input wps-input-checkbox"}),o.a.createElement("label",{dangerouslySetInnerHTML:{__html:t.settings.cart.cartTermsContent},htmlFor:"wps-input-terms",className:"col-11 wps-input-label wps-input-terms"})))}var T=a(262),_=a(1356),k=a(373);function S(e){var t=e.isReady,a=e.totalElement,n=e.currencyCode,s=Object(k.d)(k.b),i=Object(c.useContext)(u.a),l=r()(i,1)[0];return Object(c.useEffect)(function(){t&&s(a.current)},[l.total]),o.a.createElement("div",{className:"baseline row align-items-end justify-content-between m-0"},o.a.createElement("p",{className:"wps-total-prefix p-0"},"Subtotal:"),o.a.createElement("p",{className:"wps-total-amount col p-0",ref:a,"data-wps-is-ready":t},t&&Object(_.a)(l.total,n)))}t.default=function(){var e=Object(c.useContext)(s.a),t=r()(e,1)[0],a=Object(c.useContext)(u.a),n=r()(a,1)[0],i=Object(c.useRef)();return o.a.createElement("section",{className:"wps-cart-footer"},t.settings.cart.enableCartNotes&&o.a.createElement(h,null),t.settings.cart.enableCartTerms&&o.a.createElement(O,null),!C()(n.notices)&&o.a.createElement(T.a,{notices:n.notices,noticeGroup:"cart"}),o.a.createElement(S,{isReady:n.isReady,currencyCode:t.info.currencyCode,totalElement:i}),o.a.createElement(d,null))}}}]);