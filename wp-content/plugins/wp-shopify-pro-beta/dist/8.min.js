(window.wpshopify=window.wpshopify||[]).push([[8],{1354:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n(0),o=n.n(a).a.createContext()},1355:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n(0),o=n.n(a).a.createContext()},1388:function(t,e,n){"use strict";n.r(e);var a=n(6),o=n.n(a),r=n(0),c=n.n(r),p=n(1354),s=n(61),u=n(33);function i(t){var e=t.showQuantityLabel,n=t.isShopReady,a=t.label;return e&&c.a.createElement("div",{className:"wps-quantity-input wps-quantity-label-wrapper d-flex align-items-center","data-wps-is-ready":n?"1":"0"},c.a.createElement("label",{htmlFor:"wps-product-quantity"},a))}var d=n(371);function l(t){var e=t.minQuantity,n=t.maxQuantity,a=t.isShopReady,s=Object(r.useContext)(d.a),u=o()(s,1)[0],i=Object(r.useContext)(p.a),l=o()(i,2),O=(l[0],l[1]),y=(Object(r.useRef)(!0),Object(r.useRef)()),E=Object(r.useState)(e),m=o()(E,2),w=m[0],f=m[1];function S(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(O({type:"UPDATE_QUANTITY",payload:Number(t.target.value)}),f(t.target.value)):(O({type:"UPDATE_QUANTITY",payload:Number(e)}),f(e))}return Object(r.useEffect)(function(){S()},[u.addedToCart]),c.a.createElement("div",{className:"wps-quantity-input wps-quantity-input-wrapper","data-wps-is-ready":a?"1":"0"},c.a.createElement("input",{ref:y,type:"number",name:"wps-product-quantity",className:"wps-product-quantity wps-form-input",value:w,onChange:S,min:e,max:n||void 0}))}function O(){var t=Object(r.useContext)(p.a),e=o()(t,1)[0],n=Object(r.useContext)(s.a),a=o()(n,1)[0],d=Object(r.useContext)(u.a),O=o()(d,1)[0];return c.a.createElement("div",{className:"wps-component wps-component-products-quantity","data-wps-is-component-wrapper":!0,"data-wps-product-id":e.product.id,"data-wps-post-id":""},c.a.createElement("div",{className:"wps-form-control row wps-product-quantity-wrapper m-0"},c.a.createElement(i,{showQuantityLabel:O.componentOptions.showQuantityLabel,isShopReady:a.isShopReady,label:O.componentOptions.quantityLabelText}),c.a.createElement(l,{minQuantity:O.componentOptions.minQuantity,maxQuantity:O.componentOptions.maxQuantity,isShopReady:a.isShopReady})))}var y=n(62),E=n.n(y),m=n(30),w=n.n(m),f=n(29),S=n.n(f);function T(t,e){switch(e.type){case"SET_SELECTED_OPTION":return w()({},t,{selectedOption:S()(t.selectedOption,{$set:e.payload})});case"SET_IS_OPTION_SELECTED":return w()({},t,{isOptionSelected:S()(t.isOptionSelected,{$set:e.payload})});case"TOGGLE_DROPDOWN":return w()({},t,{isDropdownOpen:S()(t.isDropdownOpen,{$set:e.payload})});default:throw new Error("Unhandled action type: ".concat(e.type," in ProductOptionReducer"))}}var b=n(1355);function v(t){var e,n=c.a.useReducer(T,{isOptionSelected:!1,option:(e=t.options).option,dropdownElement:e.dropdownElement,selectedOption:{},isDropdownOpen:!1}),a=o()(n,2),r=a[0],p=a[1],s=c.a.useMemo(function(){return[r,p]},[r]);return c.a.createElement(b.a.Provider,E()({value:s},t))}var h=c.a.lazy(function(){return Promise.all([n.e(9),n.e(16)]).then(n.bind(null,1391))});function C(t){var e=t.option,n=Object(r.useRef)();return c.a.createElement(v,{options:{option:e,dropdownElement:n}},c.a.createElement(h,null))}var _=n(1363),N=n.n(_),j=n(1369),I=n.n(j),L=n(1358),A=n.n(L),x=n(1374),R=n.n(x),D=n(166),P=n.n(D),g=n(1375),q=n.n(g),k=n(142);function Q(t){return R()(t,"value").filter(function(t){return t.value})}function V(t){return!!t.length&&(e=function(t){return I()(q()(t,function(t){return t.selectedOptions}),"name")}(function(t){return P()(t,function(t){return t.availableForSale})}(t)),A()(e,function(t,e){return{name:e,values:Q(t)}}));var e}function U(){var t=Object(r.useRef)(!0),e=Object(r.useContext)(d.a),n=o()(e,2),a=(n[0],n[1]),s=Object(r.useContext)(p.a),u=o()(s,2),i=u[0],l=u[1],O=V(i.product.variants);return Object(r.useEffect)(function(){var e,n;t.current?t.current=!1:(e=i.selectedOptions,n=i.product,N()(e)===n.options.length?(l({type:"SET_ALL_SELECTED_OPTIONS",payload:!0}),a({type:"SET_SELECTED_VARIANT",payload:{product:i.product,selectedOptions:i.selectedOptions}}),wp.hooks&&wp.hooks.doAction("before.product.addToCart",i)):l({type:"SET_ALL_SELECTED_OPTIONS",payload:!1}))},[i.selectedOptions]),O&&c.a.createElement("div",{className:"wps-component wps-component-products-options container-fluid","data-wps-is-component-wrapper":!0},O.map(function(t){return c.a.createElement(C,{key:t.name,option:t})}))}var B=n(51),M=n.n(B),$=n(69),F=n.n($),G=n(373),Y=n(36);function z(){var t=Object(r.useRef)(),e=Object(r.useRef)(!1),n=Object(G.d)(G.b),a=Object(r.useContext)(u.a),i=o()(a,1)[0],l=Object(r.useContext)(d.a),O=o()(l,2),y=O[0],E=O[1],m=Object(r.useContext)(p.a),w=o()(m,2),f=w[0],S=w[1],T=Object(r.useContext)(s.a),b=o()(T,2),v=b[0],h=(b[1],{backgroundColor:i.componentOptions.addToCartButtonColor});function C(){return(C=F()(M.a.mark(function t(e){var n,a,o;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),!f.allOptionsSelected&&y.hasManyVariants?S({type:"SET_MISSING_SELECTIONS",payload:!0}):(n=y.hasManyVariants?Object(Y.e)(f.product,f.selectedOptions):f.product.variants[0],a={variantId:n.id,quantity:f.quantity},o=Object(k.a)(n,f.product),wp.hooks&&wp.hooks.doAction("product.addToCart",{checkoutId:v.checkoutId,lineItems:[a],variants:[o]}),S({type:"SET_ALL_SELECTED_OPTIONS",payload:!1}),S({type:"REMOVE_SELECTED_OPTIONS"}),E({type:"SET_ADDED_VARIANT",payload:o}),wp.hooks&&wp.hooks.doAction("on.product.addToCart",a,o));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(r.useEffect)(function(){v.isShopReady&&(e.current?e.current=!1:f.allOptionsSelected&&n(t.current))},[f.allOptionsSelected]),c.a.createElement("div",{className:"wps-component wps-component-products-add-button wps-btn-wrapper","data-wps-is-component-wrapper":!0,"data-wps-product-id":f.product.id,"data-wps-post-id":""},c.a.createElement("button",{ref:t,type:"button",itemProp:"potentialAction",itemScope:!0,itemType:"https://schema.org/BuyAction",className:"wps-btn wps-btn-secondary wps-add-to-cart",title:f.product.title,"data-wps-is-ready":v.isShopReady?"1":"0",onClick:function(t){return C.apply(this,arguments)},style:h},i.componentOptions.addToCartButtonText?i.componentOptions.addToCartButtonText:"Add to cart"))}var W=n(280);function H(t,e){switch(e.type){case"SET_ALL_SELECTED_OPTIONS":return w()({},t,{allOptionsSelected:e.payload});case"UNSET_SELECTED_OPTIONS":return w()({},t,{selectedOptions:S()(t.selectedOptions,{$unset:[e.payload]})});case"UPDATE_SELECTED_OPTIONS":return w()({},t,{selectedOptions:S()(t.selectedOptions,{$merge:e.payload})});case"REMOVE_SELECTED_OPTIONS":return w()({},t,{selectedOptions:S()(t.selectedOptions,{$set:{}})});case"SET_MISSING_SELECTIONS":return w()({},t,{missingSelections:e.payload});case"SET_AVAILABLE_VARIANTS":return w()({},t,{availableVariants:S()(t.product,{$apply:function(t){return Object(k.d)(t,e.payload)}})});case"UPDATE_QUANTITY":return w()({},t,{quantity:e.payload});default:throw new Error("Unhandled action type: ".concat(e.type," in ProductBuyButtonReducer"))}}function J(t){var e=c.a.useReducer(H,function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{selectedOptions:{},availableVariants:[],allOptionsSelected:!1,missingSelections:!1,quantity:1,product:!!t.payload&&t.payload}}(t.productState)),n=o()(e,2),a=n[0],r=n[1],s=c.a.useMemo(function(){return[a,r]},[a]);return c.a.createElement(p.a.Provider,E()({value:s},t))}var K=n(39),X=n(50);e.default=function(){var t=Object(r.useContext)(s.a),e=o()(t,1)[0],n=Object(r.useContext)(u.a),a=o()(n,1)[0],p=Object(r.useContext)(d.a),i=o()(p,1)[0];return Object(K.d)(c.a.createElement("div",{className:"wps-buy-button-wrapper","data-wps-is-ready":e.isShopReady?"1":"0","data-wps-component-order":"0"},c.a.createElement(J,{productState:i},i.payload.availableForSale?c.a.createElement(c.a.Fragment,null,!a.componentOptions.hideQuantity&&c.a.createElement(O,null),i.hasManyVariants&&c.a.createElement(U,null),c.a.createElement(z,null)):c.a.createElement(W.a,{type:"warning",message:"Out of stock"}))),Object(X.d)(i.element,a.componentOptions.dropzoneProductBuyButton))}}}]);