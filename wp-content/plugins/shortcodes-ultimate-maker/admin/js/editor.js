var ShortcodesUltimateMakerEditor={};ShortcodesUltimateMakerEditor.App=function($){var e={};return e.el={editor:$("#shortcodes-ultimate-maker-editor"),publishBtn:$('input#publish[name="publish"]'),updateBtn:$('input#publish[name="save"]')},e.l10n=ShortcodesUltimateMakerEditorData.l10n.Editor,e.init=function(){e.changePublishLabels(),ShortcodesUltimateMakerEditor.TagName.init(),ShortcodesUltimateMakerEditor.Icon.init(),ShortcodesUltimateMakerEditor.Attributes.init(),ShortcodesUltimateMakerEditor.Code.init(),ShortcodesUltimateMakerEditor.CustomCss.init()},e.removePostboxClass=function(){e.el.editor.removeClass("postbox")},e.changePublishLabels=function(){e.el.publishBtn.val(e.l10n.createShortcode),e.el.updateBtn.val(e.l10n.updateShortcode)},{init:e.init}}(jQuery),jQuery(document).ready(ShortcodesUltimateMakerEditor.App.init),ShortcodesUltimateMakerEditor.TagName=function($){var e={};return e.el={tagName:$("#sum-tag-name"),title:$("#sum-title")},e.init=function(){e.bindEvents()},e.bindEvents=function(){e.el.tagName.on("keyup",e.validateTagName),e.el.title.on("blur",e.generateTagName)},e.generateTagName=function(){var t=e.el.title.val(),i=e.el.tagName.val(),a="";""===i&&(a=t.toLowerCase().replace(/ /g,"_").replace(/[^a-z0-9_]/g,""),e.el.tagName.val(a),e.el.tagName.trigger("keyup"))},e.validateTagName=function(t){var i=e.el.tagName.val(),a=/^([a-z0-9_]*)$/.test(i),l=""===i;a?e.el.tagName.parent("td").removeClass("sum-validation-failed"):e.el.tagName.parent("td").addClass("sum-validation-failed"),l?e.el.tagName.parent("td").addClass("sum-validation-required"):e.el.tagName.parent("td").removeClass("sum-validation-required")},{init:e.init}}(jQuery),ShortcodesUltimateMakerEditor.Icon=function($){var e={};return e.el={body:$("body"),field:$("#sum-icon"),value:$("#sum-icon-value"),picker:null,dropdown:null,mediaLink:null,mediaFrame:null},e.tpl={general:$("#sum-icon-tpl").html(),fa:$("#sum-icon-fa-tpl").html(),img:$("#sum-icon-img-tpl").html()},e.l10n=ShortcodesUltimateMakerEditorData.l10n.Icon,e.icons=ShortcodesUltimateMakerEditorData.icons,e.init=function(){$(e.tpl.general).appendTo(e.el.field),e.el.picker=e.el.field.children(".sum-icon-picker").attr("data-label-closed",e.l10n.selectIcon).attr("data-label-open",e.l10n.close),e.el.dropdown=e.el.field.children(".sum-icon-dropdown").append(e.getDropdownContent()),e.el.mediaLink=e.el.field.find(".sum-icon-media-link a").html(e.l10n.useCustomImage+"&hellip;"),e.el.mediaFrame=wp.media({library:{type:"image"},title:e.l10n.selectCustomImage,button:{text:e.l10n.useSelectedImage},multiple:!1}),e.updatePreview(),e.bindEvents()},e.bindEvents=function(){e.el.picker.on("click",e.toggleDropdown),e.el.dropdown.on("click","i",e.setFAIcon),e.el.mediaLink.on("click",e.openMediaLibrary),e.el.mediaFrame.on("select",e.setImgIcon),e.el.body.on("click",e.clickOutsideDropdown)},e.updatePreview=function(){var t=e.el.value.val(),i="";i=t.indexOf("/")>-1?e.tpl.img.replace("%ICON%",t):e.tpl.fa.replace(/%ICON%/g,t),e.el.picker.html(i)},e.setFAIcon=function(){e.el.value.val($(this).attr("title")),e.toggleDropdown(),e.updatePreview()},e.setImgIcon=function(){var t=e.el.mediaFrame.state().get("selection").first().toJSON();e.el.value.val(t.url),e.updatePreview()},e.openMediaLibrary=function(t){t.preventDefault(),e.toggleDropdown(),e.el.mediaFrame.open()},e.getDropdownContent=function(){for(var t="",i=e.icons.length-1;i>=0;i--)t+=e.tpl.fa.replace(/%ICON%/g,e.icons[i]);return t},e.toggleDropdown=function(){e.el.field.toggleClass("open")},e.clickOutsideDropdown=function(t){!e.el.field.is(t.target)&&e.el.field.hasClass("open")&&0===e.el.field.has(t.target).length&&e.el.field.removeClass("open")},{init:e.init}}(jQuery),ShortcodesUltimateMakerEditor.Attributes=function($){var e={};return e.el={field:$("#sum-attributes"),value:$("#sum-attributes-value"),head:null,items:null,add:null},e.tpl={general:$("#sum-attributes-tpl").html(),item:$("#sum-attributes-item-tpl").html(),option:$("#sum-attributes-option-tpl").html(),types:""},e.l10n=ShortcodesUltimateMakerEditorData.l10n.Attributes,e.index=0,e.defaults=ShortcodesUltimateMakerEditorData.attributes.defaults,e.types=ShortcodesUltimateMakerEditorData.attributes.types,e.init=function(){e.tpl.general=e.parseTemplate(e.tpl.general,e.l10n.general),$(e.tpl.general).appendTo(e.el.field),e.el.items=e.el.field.children(".sum-attributes-items");for(var t=e.getValue(),i=0;i<t.length;i++)e.addAttribute(t[i]);e.el.items.sortable({tolerance:"pointer",handle:".sum-attributes-item-head",containment:"parent",placeholder:"sum-attributes-item-placeholder",start:function(){e.closeAll()},stop:function(){e.updateValue()}}),e.el.add=e.el.field.children(".sum-attributes-add"),e.el.add.children("a").text(e.l10n.add),e.bindEvents()},e.bindEvents=function(){e.el.add.on("click","a",e.addNewAttribute),e.el.field.on("click",".sum-attributes-item-head-label > a, .sum-attributes-item-head-toggle, .sum-attributes-item-toggle",e.toggleAttribute),e.el.field.on("click",".sum-attributes-item-close",e.toggleAttribute),e.el.field.on("click",".sum-attributes-item-head-delete",e.deleteAttribute),e.el.field.on("click",".sum-attributes-item-restore > a",e.restoreAttribute),e.el.field.on("change",".sum-attributes-item-label",e.changeLabel),e.el.field.on("change",".sum-attributes-item-name",e.changeName),e.el.field.on("change",".sum-attributes-item-type",e.changeType),e.el.field.on("change",".sum-attributes-item-default",e.changeDefault),e.el.field.on("keyup",".sum-attributes-item-name",e.validateName),e.el.items.on("change","td input, td select, td textarea",e.updateValue)},e.addNewAttribute=function(){var t=e.index+1;e.addAttribute($.extend({},e.defaults,{name:e.l10n.item.newName.replace("%s",t),slug:"attribute_"+t,options:"option1|%s 1\noption2|%s 2".replace(/%s/g,e.l10n.general.option),open:!0})),e.updateValue()},e.addAttribute=function(t){t=$.extend({},e.defaults,t);var i=$.extend({},{index:e.index},e.l10n.item),a=$(e.parseTemplate(e.tpl.item,i));a.find(".sum-attributes-item-head-label > a").text(t.name||t.slug),a.find(".sum-attributes-item-head-type").text(e.types[t.type]),a.find(".sum-attributes-item-head-default").text(t.default),a.find(".sum-attributes-item-label").val(t.name),a.find(".sum-attributes-item-default").val(t.default),a.find(".sum-attributes-item-name").val(t.slug),a.find(".sum-attributes-item-desc").val(t.desc),a.find(".sum-attributes-item-options").val(t.options),a.find(".sum-attributes-item-min").val(t.min),a.find(".sum-attributes-item-max").val(t.max),a.find(".sum-attributes-item-step").val(t.step),a.find(".sum-attributes-item-type").append(e.getTypes()).val(t.type),a.attr("data-type",t.type),a.appendTo(e.el.items),e.index++,void 0!==typeof t.open&&t.open&&(e.closeAll(),a.addClass("open"),a.find("input:text:first").focus())},e.closeAll=function(){e.el.items.children("div").removeClass("open")},e.getValue=function(){return JSON.parse(e.el.value.val())},e.getTypes=function(){if(""!==e.tpl.types)return e.tpl.types;var t=0;return $.each(e.types,function(t,i){e.tpl.types+=e.tpl.option.replace("%value%",t).replace("%label%",i)}),e.tpl.types},e.updateValue=function(){var t=e.el.items.children("div"),i=[];t.each(function(e){var t=$(this),a=t.find("input, textarea, select"),l={};t.hasClass("deleted")||(a.each(function(){var e=$(this),t=e.data("name"),i=e.val();l[t]=i}),i.push(l))}),e.el.value.val(JSON.stringify(i)),$(document).trigger("sum/attributes/updated")},e.parseTemplate=function(e,t){return e.replace(/%(\w+)%/g,function(e,i){return void 0!==t[i]?t[i]:""})},e.toggleAttribute=function(t){t.preventDefault();var i=$(this).parents(".sum-attributes-item");i.hasClass("open")?e.closeAll():(e.closeAll(),i.addClass("open"))},e.deleteAttribute=function(t){t.preventDefault();var i=$(this).parents(".sum-attributes-item");i.removeClass("open"),i.addClass("deleted"),e.updateValue()},e.restoreAttribute=function(t){$(this).parents(".sum-attributes-item").removeClass("deleted"),e.updateValue()},e.changeLabel=function(){var e=$(this).parents(".sum-attributes-item"),t=e.find(".sum-attributes-item-head-label > a"),i=e.find(".sum-attributes-item-label").val(),a=e.find(".sum-attributes-item-name").val();""!==i?t.text(i):t.text(a)},e.changeName=function(){var e=$(this).parents(".sum-attributes-item"),t=e.find(".sum-attributes-item-head-label > a"),i=e.find(".sum-attributes-item-label").val(),a=e.find(".sum-attributes-item-name").val();""===i&&t.text(a)},e.changeType=function(t){var i=$(this).parents(".sum-attributes-item"),a=i.find(".sum-attributes-item-head-type"),l=$(this).val();a.text(e.types[l]),i.attr("data-type",l)},e.changeDefault=function(){var e=$(this).parents(".sum-attributes-item"),t=e.find(".sum-attributes-item-head-default"),i=$(this).val();t.text(i)},e.validateName=function(){var e=$(this),t=e.val(),i=/^([a-z0-9_]*)$/.test(t),a=""===t;i?e.parent("td").removeClass("sum-validation-failed"):e.parent("td").addClass("sum-validation-failed"),a?e.parent("td").addClass("sum-validation-required"):e.parent("td").removeClass("sum-validation-required")},{init:e.init}}(jQuery),ShortcodesUltimateMakerEditor.Code=function($){var e={};return e.el={field:$("#sum-code"),value:$("#sum-code-value"),mode:$("#sum-type"),container:$("#sum-code-editor"),editor:null,variablesContainer:$("#sum-code-variables"),variables:$("#sum-code-variables-list"),fullscreen:null,attributes:$("#sum-attributes")},e.tpl={fullscreen:$("#sum-code-fullscreen-tpl").html(),variable:{tag:$("#sum-code-variable-tpl").html(),html:"{{%s}}",php_echo:"$%s",php_return:"$%s"}},e.l10n=ShortcodesUltimateMakerEditorData.l10n.Code,e.init=function(){e.el.container.removeClass("hidden"),e.el.editor=ace.edit("sum-code-editor"),e.el.editor.$blockScrolling=1/0,e.el.editor.getSession().setValue(e.el.value.val()),e.el.editor.getSession().setUseWrapMode(!0),e.el.editor.getSession().setWrapLimitRange(null,null),e.el.editor.getSession().setUseSoftTabs(null),e.el.editor.getSession().setUseWorker(!1),e.el.editor.setTheme("ace/theme/sqlserver"),e.el.editor.renderer.setShowPrintMargin(null),e.el.value.addClass("hidden"),e.el.fullscreen=$(e.tpl.fullscreen).attr("title",e.l10n.fullscreen),e.el.container.append(e.el.fullscreen),e.changeEditorMode(),e.updateHeight(),e.updateVariables(),e.bindEvents()},e.bindEvents=function(){e.el.editor.getSession().on("change",e.updateValue),e.el.editor.getSession().on("change",e.updateHeight),e.el.mode.on("change",e.changeEditorMode),e.el.fullscreen.on("click",e.toggleFullscreen),e.el.mode.on("change",e.updateVariables),$(document).on("sum/attributes/updated",e.updateVariables),e.el.variables.on("click","a",e.insertVariable)},e.updateValue=function(){e.el.value.val(e.el.editor.getSession().getValue())},e.updateHeight=function(){var t=e.el.editor.getSession().getScreenLength()*e.el.editor.renderer.lineHeight+e.el.editor.renderer.scrollBar.getWidth()+3*e.el.editor.renderer.lineHeight,i=$(window).height()-100;t>i&&(t=i),e.el.container.height(t.toString()+"px"),e.el.editor.resize()},e.changeEditorMode=function(){var t=e.el.mode.val();"html"===t?e.el.editor.getSession().setMode("ace/mode/html"):"php_echo"!==t&&"php_return"!==t||e.el.editor.getSession().setMode({path:"ace/mode/php",inline:!0})},e.toggleFullscreen=function(){e.el.container.toggleClass("sum-code-editor-fullscreen"),e.el.editor.resize(),e.el.editor.focus()},e.updateVariables=function(){var t=e.el.attributes.find(".sum-attributes-item");e.el.variables.children("li").remove(),e.addVariable("content"),t.each(function(){var t=$(this);if(!t.hasClass("deleted")){var i=t.find('input:text[data-name="slug"]').val();""!==i&&e.addVariable(i)}})},e.addVariable=function(t){var i=e.el.mode.val(),a=$(e.tpl.variable.tag);a.children("a").text(e.tpl.variable[i].replace("%s",t)),e.el.variables.append(a)},e.insertVariable=function(t){t.preventDefault();var i=$(this).text();e.el.editor.insert(i),e.el.editor.focus()},{init:e.init}}(jQuery),ShortcodesUltimateMakerEditor.CustomCss=function($){var e={};return e.el={field:$("#sum-custom-css"),value:$("#sum-custom-css-value"),container:$("#sum-custom-css-editor"),editor:null},e.init=function(){e.el.container.removeClass("hidden"),e.el.editor=ace.edit("sum-custom-css-editor"),e.el.editor.$blockScrolling=1/0,e.el.editor.getSession().setValue(e.el.value.val()),e.el.editor.getSession().setUseWrapMode(!0),e.el.editor.getSession().setWrapLimitRange(null,null),e.el.editor.getSession().setUseSoftTabs(null),e.el.editor.getSession().setUseWorker(!1),e.el.editor.getSession().setMode("ace/mode/css"),e.el.editor.setTheme("ace/theme/sqlserver"),e.el.editor.renderer.setShowPrintMargin(null),e.el.value.addClass("hidden"),e.updateHeight(),e.bindEvents()},e.bindEvents=function(){e.el.editor.getSession().on("change",e.updateValue),e.el.editor.getSession().on("change",e.updateHeight)},e.updateValue=function(){e.el.value.val(e.el.editor.getSession().getValue())},e.updateHeight=function(){var t=e.el.editor.getSession().getScreenLength()*e.el.editor.renderer.lineHeight+e.el.editor.renderer.scrollBar.getWidth()+3*e.el.editor.renderer.lineHeight,i=$(window).height()-100;t>i&&(t=i),e.el.container.height(t.toString()+"px"),e.el.editor.resize()},{init:e.init}}(jQuery);
//# sourceMappingURL=./editor.js.map