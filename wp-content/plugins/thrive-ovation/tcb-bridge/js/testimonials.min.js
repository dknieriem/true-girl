/*! Thrive Ovation - 2017-02-15
* http://www.thrivethemes.com/
* Copyright (c) 2017 Thrive Themes */
var TVO_Front=TVO_Front||{};TVO_Front.models=TVO_Front.models||{},TVO_Front.collections=TVO_Front.collections||{},function(a){Backbone.emulateHTTP=!0,TVO_Front.models.Base=Backbone.Model.extend({idAttribute:"id",sync:function(a,b,c){var d;return c=c||{},c.cache=!1,_.isUndefined(TVO_Front.nonce)||_.isNull(TVO_Front.nonce)||(d=c.beforeSend,c.beforeSend=function(a){return a.setRequestHeader("X-WP-Nonce",TVO_Front.nonce),d?d.apply(this,arguments):void 0}),Backbone.sync(a,b,c)}}),TVO_Front.collections.Base=Backbone.Collection.extend({sync:function(a,b,c){var d;return c=c||{},c.cache=!1,c.url=this.url,_.isUndefined(TVO_Front.nonce)||_.isNull(TVO_Front.nonce)||(d=c.beforeSend,c.beforeSend=function(a){return a.setRequestHeader("X-WP-Nonce",TVO_Front.nonce),d?d.apply(this,arguments):void 0}),Backbone.sync(a,b,c)}}),TVO_Front.models.Shortcode=TVO_Front.models.Base.extend({url:function(){return TVO_Front.routes.shortcodes+"/"+this.get("id")}}),TVO_Front.collections.Shortcodes=TVO_Front.collections.Base.extend({model:TVO_Front.models.Shortcode,url:TVO_Front.routes.shortcodes,parse:function(a){return a.forEach(function(a){TVO_Front.selected_template&&a.id==TVO_Front.selected_template?a.active=1:a.active=0,a.display=a.config.display,a.testimonials=a.config.testimonials.length,a.config.tags?a.tags=a.config.tags.length:a.tags=0}),a},comparator:function(a){return-a.get("id")}}),TVO_Front.models.Tag=TVO_Front.models.Base.extend({}),TVO_Front.collections.Tags=TVO_Front.collections.Base.extend({model:TVO_Front.models.Tag,url:TVO_Front.routes.tags}),TVO_Front.models.Testimonial=TVO_Front.models.Base.extend({}),TVO_Front.collections.Testimonials=TVO_Front.collections.Base.extend({model:TVO_Front.models.Testimonial,url:TVO_Front.routes.testimonials})}(jQuery);var TVO_Front=TVO_Front||{};TVO_Front.objects=TVO_Front.objects||{},function(a){var b=Backbone.Router.extend({$element:"#tvo-testimonial-display",view:null,routes:{start:"start","pre-select":"preSelect","select-testimonials(/:id)":"selectTestimonials","select-tags(/:id)":"selectTags","display-options":"displayOptions","save-list":"saveList"},backNextButtons:function(b,c){""==b?a(".tvo-back").attr("href","").hide():a(".tvo-back").attr("href","#"+b).show(),""==c?a(".tvo-next").attr("href","").hide():a(".tvo-next").attr("href","#"+c).show()},start:function(){this.view&&this.view.remove(),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.show(),this.backNextButtons("",""),"undefined"!=typeof TVE_Editor_Page&&TVE_Editor_Page.overlay(),TVO_Front.objects.Shortcodes=new TVO_Front.collections.Shortcodes;var b=this.view=new TVO_Front.views.Shortcodes({collection:TVO_Front.objects.Shortcodes});TVO_Front.objects.selectedTestimonials=new TVO_Front.collections.Testimonials,TVO_Front.objects.selectedTags=[],TVO_Front.objects.editShortcode="",TVO_Front.objects.Shortcodes.fetch({data:{type:"display"},success:function(){b.render()}}),a(this.$element).html(this.view.$el)},preSelect:function(){this.view&&this.view.remove(),TVO_Front.objects.selectedTestimonials=new TVO_Front.collections.Testimonials,TVO_Front.objects.selectedTags=[],this.view=new TVO_Front.views.PreSelectView,this.backNextButtons("",""),a(this.$element).html(this.view.render().$el)},selectTestimonials:function(b){this.view&&this.view.remove(),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.show(),this.backNextButtons("pre-select","display-options"),"undefined"!=typeof TVE_Editor_Page&&TVE_Editor_Page.overlay(),TVO_Front.objects.currentSelection="testimonials",TVO_Front.objects.Testimonials=new TVO_Front.collections.Testimonials;var c=this;TVO_Front.objects.Testimonials.fetch({data:{status:TVO_Front["const"].ready_to_display_status},success:function(){var a;if(!b||isNaN(b))a=TVO_Front.active_config?TVO_Front.active_config.testimonials:[];else{var d=TVO_Front.objects.Shortcodes.get(b);a=d.get("config").testimonials,TVO_Front.objects.editShortcode=b}if(0===TVO_Front.objects.selectedTestimonials.length)for(var e in a)TVO_Front.objects.selectedTestimonials.add(TVO_Front.objects.Testimonials.get(a[e]));c.view.render()}}),this.view=new TVO_Front.views.SelectTestimonials,a(this.$element).html(this.view.$el)},selectTags:function(b){this.view&&this.view.remove(),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.show(),this.backNextButtons("pre-select","save-list"),"undefined"!=typeof TVE_Editor_Page&&TVE_Editor_Page.overlay(),TVO_Front.objects.currentSelection="tags",TVO_Front.objects.Tags=new TVO_Front.collections.Tags,TVO_Front.objects.Tags.fetch({success:function(){var a;if(!b||isNaN(b))a=TVO_Front.active_config?TVO_Front.active_config.tags:[],TVO_Front.objects.max_testimonials=TVO_Front.active_config?TVO_Front.active_config.max_testimonials:100;else{var c=TVO_Front.objects.Shortcodes.get(b);a=c.get("config").tags,TVO_Front.objects.editShortcode=b,TVO_Front.objects.max_testimonials=c.max_testimonials}0===TVO_Front.objects.selectedTags.length&&(TVO_Front.objects.selectedTags=a instanceof Array?a:[],TVO_Front.objects.selectedTags=TVO_Front.objects.selectedTags.map(function(a){return parseInt(a,10)})),TVO_Front.objects.TagsList.render()}}),TVO_Front.objects.TagsList=this.view=new TVO_Front.views.SelectTags,TVO_Front.objects.selectedTags instanceof Array||(TVO_Front.objects.selectedTags=[]),a(this.$element).html(this.view.$el)},displayOptions:function(){return this.view&&this.view.remove(),this.backNextButtons("select-testimonials","save-list"),TVO_Front.objects.selectedTestimonials&&0!=TVO_Front.objects.selectedTestimonials.length?TVO_Front.objects.selectedTestimonials.length<2?void this.saveList():(this.view=new TVO_Front.views.TestimonialDisplayOptions({collection:TVO_Front.objects.selectedTestimonials}),void a(this.$element).html(this.view.render().$el)):void this.selectTestimonials()},saveList:function(){this.view&&this.view.remove();var b;b="testimonials"==TVO_Front.objects.currentSelection?TVO_Front.objects.selectedTestimonials.length>1?"display-options":"select-testimonials":"select-tags",this.backNextButtons(b,""),TVO_Front.objects.Testimonials=new TVO_Front.collections.Testimonials,this.view=new TVO_Front.views.SaveTestimonialList({collection:TVO_Front.objects.Testimonials}),a(this.$element).html(this.view.render().$el)}});a(function(){parent.location.hash="",TVO_Front.router=new b,a(document).on("click","#tvo_display_testimonial_settings, #tvo_display_testimonial_template",function(){document.location.hash=""})})}(jQuery);var TVO_Front=TVO_Front||{};TVO_Front.views=TVO_Front.views||{},TVO_Front.objects=TVO_Front.objects||{},_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/<#=([\s\S]+?)#>/g,escape:/<#-([\s\S]+?)#>/g},function(a){a(function(){TVO_Front.tpl=function(b,c){var d=a("script#"+b.replace(/\//g,"-")).html()||"";return c?_.template(d)(c):_.template(d)},TVO_Front.views.GenericItem=Backbone.View.extend({initialize:function(a){this.template=TVO_Front.tpl(a.template)},render:function(){return this.$el.html(this.template()),this}}),TVO_Front.views.Shortcodes=Backbone.View.extend({events:{"click .tvo-create-testimonial-list":"createShortcode"},initialize:function(){this.template=TVO_Front.tpl("create-testimonial")},renderOne:function(a){if(0!=a.get("testimonials")||0!=a.get("tags")){var b=new TVO_Front.views.ShortcodeItem({template:"shortcode-box",className:"tvo-shortcode-box-container",model:a});this.$el.find("#tvo-testimonial-shortcode-list").prepend(b.render().$el)}},render:function(){return this.$el.html(this.template()),this.$el.find("#tvo-testimonial-shortcode-list .tvo-shortcode-box").not(".tvo-create-testimonial-list").remove(),this.collection.sort(),this.collection.each(this.renderOne,this),"undefined"!=typeof TVE_Editor_Page&&TVE_Editor_Page.overlay(!0),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.hide(),this},createShortcode:function(){delete TVO_Front.active_config}}),TVO_Front.views.ShortcodeItem=Backbone.View.extend({events:{"click .tvo-edit-title":"editTitle","change .tvo-edit-title-input":"saveTitle","keyup .tvo-edit-title-input":"saveTitleKeyup","blur .tvo-edit-title-input":"closeEditTitle","click .tvo-copy-shortcode":"copyShortcode","click .tvo-delete-shortcode":"deleteShortcode","click .tvo-existing-shortcode-template":"selectExistingTemplate"},initialize:function(a){this.template=TVO_Front.tpl(a.template)},render:function(){return this.$el.html(this.template()),this},editTitle:function(b){var c=this,d=a(b.currentTarget),e=c.$el.find(".tvo-testimonial-title").hide(),f=c.$el.find(".tve_lightbox_input");f.show().val(e.text().trim()).focus().select(),d.hide(),b.stopPropagation()},saveTitle:function(a){var b=a.currentTarget.value;b!=this.model.get("name")&&(this.model.set("name",b),this.$el.find(".tvo-testimonial-edit-title-box .tvo-testimonial-title").html(b),this.model.save()),this.closeEditTitle()},saveTitleKeyup:function(a){27===a.which?this.closeEditTitle():13===a.which&&this.saveTitle()},closeEditTitle:function(){this.$el.find(".tvo-edit-title-input").hide(),this.$el.find(".tvo-testimonial-title,.tvo-edit-title").show()},copyShortcode:function(){var b=this.model.attributes;delete b.id,b.type=b.config.type,a.ajax({headers:{"X-WP-Nonce":TVO_Front.nonce},cache:!1,url:TVO_Front.routes.shortcodes,type:"POST",data:b}).done(function(a){TVO_Front.router.start()}).always(function(){})},deleteShortcode:function(){var a=this;this.model.destroy({success:function(b,c){a.$el.remove()}})},selectExistingTemplate:function(){var a=this.model.get("config");a.template=TVO_Front.init_template,TVE_Content_Builder.tvo.display.fetch_shortcode(a)}}),TVO_Front.views.PreSelectView=Backbone.View.extend({currentSelection:"",events:{"click .tvo-select-tags":"selectTags","click .tvo-select-testimonials":"selectTestimonials"},initialize:function(a){this.template=TVO_Front.tpl("pre-select")},render:function(){return this.$el.html(this.template()),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.hide(),this},selectTags:function(){TVO_Front.router.navigate("#select-tags",{trigger:!0})},selectTestimonials:function(){TVO_Front.router.navigate("#select-testimonials",{trigger:!0})}}),TVO_Front.views.SelectTestimonials=Backbone.View.extend({className:"tve_scT tve_green",testimonialsPagination:null,events:{"click .tvo-testimonial-item":"addTestimonial","keyup .tvo-testimonials-search":"searchTestimonials","change #tvo-testimonial-select-all":"checkUncheckTestimonials","change .tvo-filter-content":"filterContent"},initialize:function(){this.template=TVO_Front.tpl("select-testimonials")},updateTestimonialCount:function(a){this.$el.find(".tvo_testimonials_count b").html(a)},addTestimonial:function(a){var b=parseInt(a.currentTarget.value,10);if(a.currentTarget.checked)TVO_Front.objects.selectedTestimonials.push(TVO_Front.objects.Testimonials.get(b));else{var c=TVO_Front.objects.selectedTestimonials.get(b);c&&TVO_Front.objects.selectedTestimonials.remove(c)}this.updateTestimonialCount(TVO_Front.objects.selectedTestimonials.length),this.showContinueButton()},showContinueButton:function(){TVO_Front.objects.selectedTestimonials.length>0?jQuery(".tvo-next").show():jQuery(".tvo-next").hide()},filterContent:function(a){var b=jQuery(a.currentTarget);"summary"==b.val()?this.$el.find(".tvo-testimonial-content-full").addClass("tvd-hide"):this.$el.find(".tvo-testimonial-content-summary").addClass("tvd-hide"),this.$el.find(".tvo-testimonial-content-"+b.val()).removeClass("tvd-hide")},checkUncheckTestimonials:function(b){var c=jQuery(b.currentTarget);this.$el.find(".tvo-testimonial-item").each(function(){var b=a(this);b.is(":checked")!==c.is(":checked")&&b.trigger("click")}),this.showContinueButton()},searchTestimonials:function(){var a=this.$el.find(".tvo-testimonials-search").val(),b=this.$el.find("#tvo-filter-tags").val(),c=this.$el.find("#tvo-filter-title").val(),d=this.$el.find("#tvo-filter-image").val(),e=this.$el.find("#tvo-from-value").val(),f=this.$el.find("#tvo-to-value").val(),g=this.$el.find("#tvo-testimonial-word-count-check").is(":checked");this.testimonialsPagination.changePage(null,{search_by:a,tags:b,title_filter:c,image_filter:d,count_from_filter:e,count_to_filter:f,check_word_count:g})},renderSelectTags:function(){var a=this.$el.find("#tvo-filter-tags"),b=this;a.data("select2")&&a.select2("destroy"),a.select2({tags:!0,multiple:!0,data:TVO_Front.all_tags,placeholder:"Select tags to filter content"}).on("select2:select",function(a){b.searchTestimonials()}).on("select2:unselect",function(a){a.params.originalEvent&&(b.searchTestimonials(),a.params.originalEvent.stopPropagation())})},renderFilterTitle:function(){var a=this.$el.find("#tvo-filter-title"),b=this;a.on("change",function(c){"any"==a.val()&&a.val("select-title"),b.searchTestimonials()})},renderFilterImage:function(){var a=this.$el.find("#tvo-filter-image"),b=this;a.on("change",function(c){"any"==a.val()&&a.val("select-image"),b.searchTestimonials()})},renderWordCount:function(){var b=this.$el.find("#tvo-from-value"),c=this.$el.find("#tvo-to-value"),d=this.$el.find("#tvo-testimonial-word-count-check"),e=this.$el.find(".tvo-filter-error-message"),f=this;b.keyup(function(a){f.searchWordCount(a,b,c,d,e)}),c.keyup(function(a){f.searchWordCount(a,b,c,d,e)}),d.change(function(g){d.is(":checked")?f.searchWordCount(g,b,c,a(this),e):f.searchTestimonials()})},searchWordCount:function(a,b,c,d,e){var f=this,g=!0,h=b.val(),i=c.val(),j=new RegExp("^([0-9]*)$");(13==a.keyCode||d.is(":checked"))&&(parseInt(i)<parseInt(h)&&(f.showErrorMessage(b,c,e,TVO_Front.translations.bigger_value),g=!1),j.test(i)&&j.test(h)||(f.showErrorMessage(b,c,e,TVO_Front.translations.only_numbers),g=!1),(g||""==h&&""==i)&&(e.hide(),f.searchTestimonials()))},showErrorMessage:function(a,b,c,d){c.show(),c.html(d)},render:function(){return this.$el.html(this.template()),this.renderSelectTags(),this.renderFilterTitle(),this.renderFilterImage(),this.renderWordCount(),this.$el.find("#tvo-testimonials-list").empty(),TVO_Front.objects.TestimonialsList=new TVO_Front.views.TestimonialsList({collection:TVO_Front.objects.Testimonials,el:this.$el.find("#tvo-testimonials-list")}),this.testimonialsPagination=new TVO_Front.views.TestimonialPagination({collection:TVO_Front.objects.Testimonials,view:TVO_Front.objects.TestimonialsList,el:this.$el.find(".tvo-top-pagination"),type:"static"}),this.testimonialsPagination.changePage(null,{}),this.updateTestimonialCount(TVO_Front.objects.selectedTestimonials.length),this.showContinueButton(),"undefined"!=typeof TVE_Editor_Page&&TVE_Editor_Page.overlay(!0),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.hide(),this}}),TVO_Front.views.SelectTags=Backbone.View.extend({className:"tve_scT tve_green",events:{"click .tvo-tag-item":"addTag","change .tvo_max_testimonials":"saveMaxTestimonials"},initialize:function(){this.template=TVO_Front.tpl("select-tags")},updateTagCount:function(a){this.$el.find(".tvo_tags_count b").html(a)},addTag:function(a){var b=parseInt(a.currentTarget.value,10),c=TVO_Front.objects.selectedTags.indexOf(b);a.currentTarget.checked?TVO_Front.objects.selectedTags.push(b):TVO_Front.objects.selectedTags.splice(c,1),this.updateTagCount(TVO_Front.objects.selectedTags.length),this.showContinueButton()},showContinueButton:function(){TVO_Front.objects.selectedTags.length>0?jQuery(".tvo-next").show():jQuery(".tvo-next").hide()},render:function(){return this.$el.html(this.template({max_testimonials:TVO_Front.objects.max_testimonials})),this.$el.find("#tvo-tags-list").empty(),TVO_Front.objects.Tags.each(this.renderTag,this),a(".tvo-next").hide(),this.updateTagCount(TVO_Front.objects.selectedTags.length),this.showContinueButton(),"undefined"!=typeof TVE_Editor_Page&&TVE_Editor_Page.overlay(!0),"undefined"!=typeof TVO_Front.preloader&&TVO_Front.preloader.hide(),this},renderTag:function(a){a.set("checked",-1!==TVO_Front.objects.selectedTags.indexOf(a.get("id")));var b=new TVO_Front.views.GenericItem({model:a,template:"tag-item",className:"tvo-col tvo-l4 tvo-m6 tvo-s12"});this.$el.find("#tvo-tags-list").append(b.render().$el)},saveMaxTestimonials:function(a){TVO_Front.objects.max_testimonials=a.currentTarget.value}}),TVO_Front.views.TestimonialsList=Backbone.View.extend({render:function(a){this.$el.empty();var b=this.collection;return"undefined"!=typeof a&&(b=new TVO_Front.collections.Testimonials(a)),b.each(this.renderOne,this),this},renderOne:function(a){a.set("tagNames",this.getTags(a.get("tags"))),a.set("checked","undefined"!=typeof TVO_Front.objects.selectedTestimonials.get(a.get("id")));var b=new TVO_Front.views.GenericItem({model:a,template:"testimonial-item",className:"tvo-testimonial-item tvo-row tvo-collapse"}),c=b.render().$el;this.$el.append(c)},getTags:function(a){var b=[];return _.each(a,function(a,c){TVO_Front.all_tags.filter(function(c){c.id==a.id&&b.push(c.text)})}),b}}),TVO_Front.views.TestimonialDisplayOptions=Backbone.View.extend({events:{"click .tvo-randomize-testimonials":"randomizeTestimonials"},testimonials:[],initialize:function(){this.template=TVO_Front.tpl("display-options")},renderOne:function(a){var b=new TVO_Front.views.GenericItem({model:a,template:"testimonial-order",className:"tvo-testimonial-order-item",attributes:{"data-id":a.get("id")}});return this.$el.find(".tvo-testimonials-list-order").append(b.render().$el),this},render:function(){this.$el.html(this.template());var a=this.$el.find(".tvo-testimonials-list-order");return a.empty(),a.sortable({placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0}),this.collection.each(this.renderOne,this),this.saveOrder(),this},saveOrder:function(){var b=this,c=b.$el.find(".tvo-testimonial-order-item");a(".tvo-next").on("click",function(){c.each(function(){var c=a(this),d=c.index(),e=c.attr("data-id");b.collection.get(e).set("order",d)})})},randomizeTestimonials:function(){this.collection.reset(this.collection.shuffle(),{silent:!0}),this.render()}}),TVO_Front.views.SaveTestimonialList=Backbone.View.extend({events:{"click .tvo-save-template":"displayTemplateSave","click #tvo-display-testimonials-shortcode-wrapper":"displayShortcode","click .tvo-save-testimonial-shortcode":"saveShortcode"},shortcode:{tags:[],testimonials:[],name:"",max_testimonials:0},initialize:function(){this.template=TVO_Front.tpl("save-testimonials-list"),this.setShortcodeConfig()},render:function(){return this.$el.html(this.template({count:"testimonials"==TVO_Front.objects.currentSelection?TVO_Front.objects.selectedTestimonials.length:TVO_Front.objects.selectedTags.length,selection:TVO_Front.objects.currentSelection})),this},setShortcodeConfig:function(){var a=[],b=[];"undefined"==typeof TVO_Front.objects.selectedTestimonials||"tags"==TVO_Front.objects.currentSelection?this.shortcode.testimonials=[]:(TVO_Front.objects.selectedTestimonials.forEach(function(b){var c=b.get("order");"undefined"!=typeof c?a[c]=b.get("id"):a.push(b.get("id"))}),this.shortcode.testimonials=a),"undefined"==typeof TVO_Front.objects.selectedTags||"testimonials"==TVO_Front.objects.currentSelection?this.shortcode.tags=[]:(TVO_Front.objects.selectedTags.forEach(function(a){b.push(a)}),this.shortcode.tags=b,this.shortcode.max_testimonials=TVO_Front.objects.max_testimonials)},displayTemplateSave:function(){a(".tvo-template-name").show()},displayShortcode:function(){TVE_Content_Builder.tvo.display.fetch_shortcode(this.shortcode)},saveShortcode:function(){this.shortcode.name=this.$el.find(".tvo-display-testimonial-shortcode-name").val(),TVE_Content_Builder.tvo.display.save_shortcode(this.shortcode)}}),TVO_Front.views.TestimonialPagination=Backbone.View.extend({events:{"click a.page":"changePage","change .tvo-items-per-page":"changeItemPerPage"},currentPage:1,pageCount:1,itemsPerPage:10,total_items:0,collection:null,params:null,type:"",view:null,template:null,initialize:function(a){this.collection=a.collection,this.view=a.view,this.type=a.type,this.template=TVO_Front.tpl("pagination/post-view")},changeItemPerPage:function(a){this.itemsPerPage=jQuery(a.target).val(),this.changePage(null,{page:1})},changePage:function(b,c){var d=this,e={itemsPerPage:this.itemsPerPage};if(b&&"undefined"!=typeof b.currentTarget?e.page=jQuery(b.currentTarget).attr("value"):c&&"undefined"!=typeof c.page?e.page=parseInt(c.page):e.page=this.currentPage,e.page<1&&(e.page=1),"undefined"!=typeof c&&("undefined"!=typeof c.search_by&&(this.search_by=c.search_by),"undefined"!=typeof c.tags&&(this.tags=c.tags),"undefined"!=typeof c.title_filter&&(this.title_filter=c.title_filter),"undefined"!=typeof c.image_filter&&(this.image_filter=c.image_filter),"undefined"!=typeof c.count_from_filter&&(this.count_from_filter=c.count_from_filter),"undefined"!=typeof c.count_to_filter&&(this.count_to_filter=c.count_to_filter),"undefined"!=typeof c.count_to_filter&&(this.check_word_count=c.check_word_count)),e.search_by=this.search_by?this.search_by:"",e.tags=this.tags?this.tags:[],e.title_filter=this.title_filter?this.title_filter:"",e.image_filter=this.image_filter?this.image_filter:"",e.count_from_filter=this.count_from_filter?this.count_from_filter:"",e.count_to_filter=this.count_to_filter?this.count_to_filter:"",e.check_word_count=this.check_word_count,e.exclude=this.exclude?this.exclude:[],"dynamic"==this.type)this.collection.fetch({reset:!0,data:a.param(e),success:function(){return 0==d.collection.length&&d.collection.total_count>0&&1!=d.currentPage?void d.changePage(null,{page:d.currentPage-1}):(d.updateParams(e.page,d.collection.total_count),void d.render())}});else if("static"==this.type&&"undefined"!=typeof this.view&&null!=this.view){this.updateParams(e.page,this.collection.length);var f,g=this.collection.clone(),h=(this.currentPage-1)*this.itemsPerPage,i=[];"undefined"!=typeof g.comparator&&g.sort(),g.each(function(a){if(e.search_by.length>0){var b=e.search_by,c=a.get("name")||"",d=a.get("content")||"";-1===c.toLowerCase().indexOf(b.toLowerCase())&&-1===d.toLowerCase().indexOf(b.toLowerCase())&&i.push(a)}if(e.tags.length>0){for(var f=!0,g=a.get("tags").map(function(a){return a.id}),h=0;h<e.tags.length;h++)-1!==g.indexOf(parseInt(e.tags[h]))&&(f=!1);f&&i.push(a)}if(""!=e.title_filter){var j=e.title_filter,k=a.get("title")||"";switch(j){case"with-title":""==k&&i.push(a);break;case"without-title":""!=k&&i.push(a)}}if(""!=e.image_filter){var l=e.image_filter;switch(l){case"with-image":0==a.get("has_picture")&&i.push(a);break;case"without-image":1==a.get("has_picture")&&i.push(a)}}if(e.check_word_count&&""!=e.count_from_filter&&""!=e.count_to_filter){var m=a.get("summary"),n=m.match(/\b(\w+)\b/g).length;(n<e.count_from_filter||n>e.count_to_filter)&&i.push(a)}});for(var j in i)g.remove(i[j]);this.updateParams(e.page,g.length),f=g.chain().rest(h).first(this.itemsPerPage).value(),this.view.render(f),0==f.length&&jQuery("#tvo-testimonials-list").html(TVO_Front.tpl("pagination/no-results")),this.render()}return!1},updateParams:function(a,b){this.currentPage=a,this.total_items=b,this.pageCount=Math.ceil(this.total_items/this.itemsPerPage)},setupParams:function(a){this.currentPage=a,this.total_items=this.collection.length,this.pageCount=Math.ceil(this.total_items/this.itemsPerPage)},render:function(){return this.$el.html(this.template({currentPage:parseInt(this.currentPage),pageCount:parseInt(this.pageCount),total_items:parseInt(this.total_items),itemsPerPage:parseInt(this.itemsPerPage)})),this}})})}(jQuery);